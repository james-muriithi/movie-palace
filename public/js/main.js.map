{"version":3,"sources":["main.js"],"names":["document","addEventListener","window","jQuery","$","on","this","toggleClass","hasClass","isFavorited","data","stroredFavourites","localStorage","getItem","JSON","parse","find","item","id","length","d","parent","prop","addFavorite","removeFavourite","setItem","stringify","filteredFavorites","filter","i","error","console","log","focus","option","url","phrase","requestDelay","getValue","element","media_type","name","title","template","type","method","value","poster_path","overview","substr","list","maxNumberOfElements","match","enabled","onChooseEvent","submit","theme","easyAutocomplete","trigger","itemHeight","height","css","each","attr","text","toLowerCase","closest","val","pathname","location","header","children","menu","removeClass","addClass","includes","parsedUrl","URL","query","searchParams","get","split","pop","footerAlign","docHeight","footerHeight","footerTop","position","top","navigator","share","protocol","hostname","then","catch","err"],"mappings":"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","file":"main.js","sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\n    if (window.jQuery) {\n        \"use strict\"; // start of use strict\n\n        /*==============================\n        Menu\n        ==============================*/\n        // document.addEventListener('touchstart', onTouchStart, { passive: true });\n        $('.header__btn').on('click', function() {\n            $(this).toggleClass('header__btn--active');\n            $('.header__nav').toggleClass('header__nav--active');\n            $('.body').toggleClass('body--active');\n\n            if ($('.header__search-btn').hasClass('active')) {\n                $('.header__search-btn').toggleClass('active');\n                $('.header__search').toggleClass('header__search--active');\n            }\n        });\n\n        const isFavorited = (data) => {\n            let stroredFavourites = localStorage.getItem('favourites')\n            if (stroredFavourites) {\n                stroredFavourites = JSON.parse(stroredFavourites)\n                return stroredFavourites.find(item => item.id === data.id)\n            }\n            return false;\n        }\n\n        if ($('svg#heart-svg').length == 1) {\n            let d = $('svg#heart-svg').parent().parent().data('json');\n            if (isFavorited(d)) {\n                $('svg#heart-svg').parent().parent().find('input').prop('checked', true)\n            }\n        }\n\n        const addFavorite = (data) => {\n            let stroredFavourites = localStorage.getItem('favourites')\n            if (stroredFavourites) {\n                stroredFavourites = JSON.parse(stroredFavourites)\n                if (isFavorited(data)) {\n                    removeFavourite(data)\n                    return 'already a favourite';\n                } else {\n                    localStorage.setItem('favourites', JSON.stringify([...stroredFavourites, data]));\n                    return\n                }\n            } else {\n                localStorage.setItem('favourites', JSON.stringify([data]));\n                return\n            }\n        }\n\n        const removeFavourite = (data) => {\n            const storedFavorites = JSON.parse(localStorage.getItem(\"favourites\"));\n\n            const filteredFavorites = storedFavorites.filter(\n                (i) => i.id !== data.id\n            );\n\n            localStorage.setItem(\"favourites\", JSON.stringify(filteredFavorites));\n\n            // $('svg#heart-svg').parent().parent().find('input').prop('checked', false)\n\n        }\n\n\n        // favourite btn\n        $('svg#heart-svg').on('click', function() {\n            try {\n                const data = $(this).parent().parent().data('json')\n                addFavorite(data);\n\n            } catch (error) {\n                console.log(error);\n            }\n        })\n\n        /*==============================\n        Search\n        ==============================*/\n        $('.header__search-btn').on('click', function() {\n            $(this).toggleClass('active');\n            $('.header__search').toggleClass('header__search--active');\n            $('section.home #myTabContent .row').toggleClass('p-t-50')\n            $('input[name=\"query\"]').focus()\n\n            if ($('.header__btn').hasClass('header__btn--active')) {\n                $('.header__btn').toggleClass('header__btn--active');\n                $('.header__nav').toggleClass('header__nav--active');\n                $('.body').toggleClass('body--active');\n            }\n        });\n\n\n        let option = {\n            url: function(phrase) { //url of the remote php db file\n                return '/suggestions/' + phrase;\n            },\n            requestDelay: 500,\n\n            getValue: function(element) { //fetch the value of name key from the returned json\n                if (element) {\n                    if (element.media_type == 'tv') {\n                        return element.name;\n                    } else {\n                        return element.title;\n                    }\n                }\n                return;\n                // try {\n                //     return element.title;\n                // } catch (error) {\n                //     return element.name;\n                // }\n\n            },\n\n            template: {\n                type: \"custom\",\n                method: function(value, item) {\n                    if (item.poster_path) {\n                        return `<img src='https://image.tmdb.org/t/p/w45/${item.poster_path}' class=\"img-thumbnail\" /> ${value} - ${item.overview.substr(0,50)}...`;\n                    }\n                    return `${value} - ${item.overview.substr(0,50)}...`\n                }\n            },\n\n            list: {\n                maxNumberOfElements: 5,\n                match: {\n                    enabled: true\n                },\n                onChooseEvent: function() {\n                    $('input[name=\"query\"]').submit();\n                }\n            },\n\n            theme: \"dark\"\n        };\n\n        $('input[name=\"query\"]').easyAutocomplete(option);\n\n\n\n\n        /*==============================\n        Home\n        ==============================*/\n\n        $('.home__nav--next').on('click', function() {\n            $('.home__carousel, .home__bg').trigger('next.owl.carousel');\n        });\n        $('.home__nav--prev').on('click', function() {\n            $('.home__carousel, .home__bg').trigger('prev.owl.carousel');\n        });\n\n        $(window).on('resize', function() {\n            var itemHeight = $('.home__bg').height();\n            $('.home__bg .item').css(\"height\", itemHeight + \"px\");\n        });\n        $(window).trigger('resize');\n\n        /*==============================\n        Tabs\n        ==============================*/\n        $('.content__mobile-tabs-menu li').each(function() {\n            $(this).attr('data-value', $(this).text().toLowerCase());\n        });\n\n        $('.content__mobile-tabs-menu li').on('click', function() {\n            var text = $(this).text();\n            var item = $(this);\n            var id = item.closest('.content__mobile-tabs').attr('id');\n            $('#' + id).find('.content__mobile-tabs-btn input').val(text);\n        });\n\n\n        /*==============================\n        Filter\n        ==============================*/\n        $('.filter__item-menu li').each(function() {\n            $(this).attr('data-value', $(this).text().toLowerCase());\n        });\n\n        $('.filter__item-menu li').on('click', function() {\n            var text = $(this).text();\n            var item = $(this);\n            var id = item.closest('.filter__item').attr('id');\n            $('#' + id).find('.filter__item-btn input').val(text);\n        });\n\n\n        /*\n        /url pathnames\n        */\n        let pathname = window.location.pathname,\n            header = $('ul.header__nav')\n        if (pathname === '/') {\n            header.children().each(function(menu) { $(this).removeClass('active').find('*').removeClass('active') })\n            header.find('li:nth-child(1)').addClass('active')\n        } else if (pathname.includes('/search/')) {\n            header.children().each(function(menu) { $(this).removeClass('active').find('*').removeClass('active') })\n            $('.header__search-btn').trigger('click')\n\n            const parsedUrl = new URL(window.location)\n            let query = parsedUrl.searchParams.get('q') || parsedUrl.searchParams.get('query')\n\n            if (pathname.split('/').pop()) {\n                query = pathname.split('/').pop()\n            }\n\n            $('input[name=\"query\"]').val(query)\n\n            console.log(query);\n        } else if (pathname.includes('/movies/')) {\n            header.children().each(function(menu) { $(this).removeClass('active').find('*').removeClass('active') })\n            header.find('li:nth-child(2)').addClass('active')\n        } else if (pathname.includes('/tv-shows/')) {\n            header.children().each(function(menu) { $(this).removeClass('active').find('*').removeClass('active') })\n            header.find('li:nth-child(3)').addClass('active')\n        }\n\n        function footerAlign() {\n            var docHeight = $(window).height();\n            var footerHeight = $('.footer').height();\n            var footerTop = $('.footer').position().top + footerHeight + 70;\n\n            if (footerTop < docHeight) {\n                $('.footer').css('margin-top', 10 + (docHeight - footerTop) + 'px');\n            }\n        }\n\n        footerAlign()\n\n        window.addEventListener('resize', footerAlign)\n\n        // web share api\n        if (navigator.share) {\n            // console.log($('.share-btn,.grid-share-btn'));\n            $('.share-btn,.grid-share-btn').addClass('show')\n            $('.total_votes').addClass('hide')\n\n            $('.share-btn,.grid-share-btn').on('click', function() {\n                const host = `${window.location.protocol}//${window.location.hostname}`;\n                let url = `${host}${$(this).data('url')}`\n                let title = `${$(this).data('title')}`\n                let rating = `Rating ⭐: ${$(this).data('rating')}`\n                let text = `${title}\\n\\n${rating}\\n\\nStory Line: ${$(this).data('overview')}\\n\\n${url}`\n\n                navigator.share({\n                        text\n                    }).then(() => {\n                        console.log('Thanks! 😄');\n                    })\n                    .catch(err => {\n                        console.log(`Couldn't share 🙁`);\n                    });\n            })\n        } else {\n            $('.share-btn,.grid-share-btn').removeClass('show')\n            $('.total_votes').removeClass('hide')\n\n            console.log('share is not supported');\n        }\n\n\n        /*==============================\n        Morelines\n        ==============================*/\n        // $('.card__description--details').moreLines({\n        // \tlinecount: 6,\n        // \tbaseclass: 'b-description',\n        // \tbasejsclass: 'js-description',\n        // \tclassspecific: '_readmore',\n        // \tbuttontxtmore: \"\",\n        // \tbuttontxtless: \"\",\n        // \tanimationspeed: 400\n        // });\n    }\n})"]}